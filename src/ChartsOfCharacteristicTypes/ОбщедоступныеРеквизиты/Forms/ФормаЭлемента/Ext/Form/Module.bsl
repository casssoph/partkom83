
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ЗаполнитьСпискиРеквизитов()
	// Вставить содержимое обработчика.
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьСпискиРеквизитов()
ИмяМетаданных = СтрЗаменить(Объект.ИмяПредопределенныхДанных,"_",".");	
ОбъектМетаданных = Метаданные.НайтиПоПолномуИмени(ИмяМетаданных);
Для Каждого Реквизит  из ОбъектМетаданных.Реквизиты цикл 
Элементы.РеквизитыИмяРеквизита.СписокВыбора.Добавить(Реквизит.Имя,Реквизит.Синоним);	
Элементы.ОтборРеквизит.СписокВыбора.Добавить(Реквизит.Имя,Реквизит.Синоним);
КонецЦикла;

Для Каждого  ТабличнаяЧасть  из ОбъектМетаданных.ТабличныеЧасти цикл 
Элементы.РеквизитыИмяРеквизита.СписокВыбора.Добавить(ТабличнаяЧасть.Имя,ТабличнаяЧасть.Синоним);	
КонецЦикла;
	
КонецПроцедуры	

&НаКлиенте
Процедура ОтборЗначениеНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
// не смог победить поэтому пока не реализовал

//ТекущиеДанные =   Элементы.Отбор.ТекущиеДанные;
//Если не  ТекущиеДанные = Неопределено тогда 

//Элемент.ДоступныеТипы =  ТипТекущегоРеквизита(ИмяМетаданных,ТекущиеДанные.Реквизит);
//Элемент.ВыбиратьТип  = ложь;



//КонецЕсли;

//	Элемент.ВыбиратьТип  = ложь;
//	
	// Вставить содержимое обработчика.
КонецПроцедуры


&НаСервере
Функция ТипТекущегоРеквизита(ИмяМетаданных,ИмяРеквизита)
	
ОбъектМетаданных = Метаданные.НайтиПоПолномуИмени(ИмяМетаданных);

Возврат  ОбъектМетаданных.Реквизиты[ИмяРеквизита].Тип	;
	
	
КонецФункции	