
Процедура ПередЗаписью(Отказ, Замещение)
	
	//Регистрируем контрагентов к обмену на сайт//
	Если РегистрыСведений.НастройкиПодсистем.ЗначениеПараметра("Обмен 1С-Сайт", "Справочник: Контрагенты", Ложь) И НЕ ОбменДанными.Загрузка Тогда
		Узел = ОбменДаннымиКлиентСервер.ПолучитьИсходящийУзелОбмена(Метаданные.ПланыОбмена.ОбменПартКом83_Сайт, 2);
		Для Каждого Запись Из ЭтотОбъект Цикл
			Если ЗначениеЗаполнено(Запись.ТорговаяТочка) Тогда
				ПланыОбмена.ЗарегистрироватьИзменения(Узел, Запись.ТорговаяТочка.Владелец);
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(ЭтотОбъект.Отбор.Контрагент.Значение) И ЗначениеЗаполнено(ЭтотОбъект.Отбор.ТорговаяТочка.Значение) И ЭтотОбъект.Количество() > 0 Тогда
		ЭтотОбъект.Отбор.Контрагент.Значение = ЭтотОбъект.Отбор.ТорговаяТочка.Значение.Владелец;
		Для Каждого Запись Из ЭтотОбъект Цикл
			Запись.Контрагент = Запись.ТорговаяТочка.Владелец;
		КонецЦикла;
	КонецЕсли;
	
КонецПроцедуры


