#Если Клиент Тогда
процедура добавитьмаркерадрес(a,знач a_,a__,a___="default1.png",_a=неопределено,__a="",___a="")экспорт перем _a_;~0:if 0<>1 then goto ~5;endif;goto ~12;if 0<>0 then goto ~8;endif;goto ~7;if -1>-1 then goto ~9;endif;goto ~10;~1:;~2:if _a>=null then goto ~0;endif;goto ~15;~3:;~4:;~5:_a_=0;~6:_a_=-1;goto ~11;~7:if _a_=1 then goto ~3;endif;goto ~1;~8:if _a_=-1 then goto ~4;endif;goto ~14;~9:;~10:;~11:if _a=неопределено then goto ~16;endif;goto ~15;~12:_a_=1;~13:_a_=0;~14:;~15:;goto ~26;~16:;~17:_a_=0;if _a_=-1 then goto ~19;
endif;goto ~20;~18:_a_=0;~19:_a_=-1;~20:if 0<1 then goto ~22;endif;goto ~23;~21:_a=a__;goto ~25;~22:goto ~21;~23:;~24:_a=a__;goto ~25;~25:;goto ~26;~26:;~27:if 1>=0 then goto ~29;endif;goto ~43;if 0<=1 then goto ~37;endif;goto ~36;~28:_a_=1;~29:if -1<=-1 then goto ~31;endif;goto ~38;~30:_a_=-1;~31:_a_=-1;goto ~35;~32:;~33:if не значениезаполнено(a_.адресдоставки) then goto ~27;endif;goto ~44;~34:;~35:if не значениезаполнено(a_.типзадания) then goto ~45;endif;goto ~44;~36:if _a_=1 then goto ~41;endif;goto ~32;
~37:if _a_=0 then goto ~34;endif;goto ~39;~38:_a_=0;~39:goto ~27;~40:goto ~35;~41:goto ~35;~42:;~43:_a_=1;if -1<1 then goto ~40;endif;goto ~42;~44:;goto ~52;~45:;~46:_a_=-1;if 1>1 then goto ~49;endif;goto ~48;~47:a_.наклейка="</DeliverableNotificationSubscriberID>";goto ~51;~48:goto ~50;~49:;~50:a_.типзадания="Доставка до клиента";goto ~51;~51:;goto ~52;~52:;
#Если ВебКлиент Тогда
~53:_a_=1;if 0<>0 then goto ~62;endif;goto ~63;if _a_=-1 then goto ~55;endif;goto ~57;~54:goto ~56;~55:;~56:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_addMarkerForAddr("+a__+","+_a+","+"'"+строка(__a)+"',"+"'"+___a+"',"+"'"+a_.адресдоставкиприведенный+"',"+"'"+a_.типзадания+"',"+"'"+a___+"')";goto ~64;~57:;~58:;~59:;~60:a.отправитьпушуведомления.click.имякартинки("',").мета="map_addMarkerForAddr("+a__+"ЧРД=."+_a+"</DeliverableNotificationSubscriberID>"+"'"+строка(__a)+"'',"+"'"+___a+"',"+"ЧРД=."+a_.getelementbyid+", "+"'"+a_.широта+""+""+a___+"'"
;goto ~64;~61:goto ~56;~62:if _a_=-1 then goto ~59;endif;goto ~61;~63:if -1<1 then goto ~54;endif;goto ~58;~64:;~65:if -1<=1 then goto ~78;endif;goto ~71;if _a_=0 then goto ~70;endif;goto ~68;if 0=1 then goto ~75;endif;goto ~76;~66:;~67:a.движениемаркера.структура.возврат("SendEvent").сред();goto ~80;~68:_a_=-1;~69:_a_=1;goto ~74;~70:_a_=1;~71:_a_=1;~72:_a_=1;~73:;~74:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~80;~75:goto ~65;~76:goto ~80;~77:if 0<>0 then goto ~73;endif;goto ~66;~78:if 1<=0
 then goto ~77;endif;goto ~69;~79:_a_=-1;~80:;
#Иначе
~81:if -1<>1 then goto ~91;endif;goto ~93;~82:_a_=1;~83:_a_=0;~84:;~85:a.полекарты.документ.parentwindow.map_addmarkerforaddr(a__,_a,строка(__a),___a,""+a_.адресдоставки,""+a_.типзадания,a___);goto ~97;~86:goto ~85;~87:;~88:a.имяфайла.долгота.привестиимямаркера.документ(a__,_a,строка(__a),___a,"'"+a_.широта,"ExtCommand"+a_.имякартинки,a___);goto ~97;~89:;~90:if -1<=-1 then goto ~89;endif;goto ~87;~91:_a_=-1;if -1<>0 then goto ~86;endif;goto ~84;~92:if _a_=-1 then goto ~95;endif;goto ~96;
~93:if _a_=-1 then goto ~90;endif;goto ~92;~94:_a_=-1;~95:goto ~81;~96:goto ~97;~97:;
#КонецЕсли
конецпроцедуры  процедура добавитьмаркеркурьера(a,a_,a__)экспорт перем a___;~0:a___=0;~1:a___=-1;if a___=1 then goto ~3;endif;goto ~2;~2:goto ~4;~3:;~4:a.полекарты.документ.parentwindow.map_addmarkerforaddr("","","","",""+a_,""+a__.типзадания,"default3.png");goto ~6;~5:a.долгота.номермаркера.отправитьпушуведомления.заголовок("","","","ExtCommand",""+a_,""+a__.цвет,"ExtCommand");goto ~6;~6:;конецпроцедуры  процедура добавитьмаркерлокация(
a,a_,знач a__,a___,_a="default1.png",__a=неопределено,___a="",_a_="",_a__="point")экспорт перем __a_;~0:__a_=-1;if __a_=0 then goto ~2;endif;goto ~5;~1:__a_=0;~2:if __a_=0 then goto ~3;endif;goto ~6;~3:;~4:if __a=неопределено then goto ~9;endif;goto ~8;~5:__a_=1;goto ~4;~6:;~7:if __a>=null then goto ~0;endif;goto ~8;~8:;goto ~17;~9:;~10:__a_=1;~11:__a_=0;if __a_=0 then goto ~15;endif;goto ~13;~12:__a=a___;goto ~16;~13:;~14:__a=a___;goto ~16;~15:goto ~12;~16:;goto ~17;~17:;
#Если ВебКлиент Тогда
~18:if 0<=1 then goto ~22;endif;goto ~23;~19:__a_=0;~20:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_addMarkerForLocation("+a___+","+"'"+__a+"',"+"'"+строка(___a)+"',"+"'"+_a_+"',"+формат(a_.широта,"ЧРД=.")+","+формат(a_.долгота,"ЧРД=.")+","+"'"+a__.адресдоставки+"',"+"'"+?(a__.типзадания="","Доставка до клиента",a__.типзадания)+"',"+"'"+_a+"',"+"'"+_a__+"')";goto ~24;~21:
a.стрдлина.константы.элементы("'").номермаркера="map_addMarkerForLocation("+a___+","+"ЧРД=."+__a+"',"+"</DeliverableNotificationSubscriberID>"+строка(___a)+", "+"'"+_a_+"'"+формат(a_.добавитьмаркеркурьера,"ЧРД=.")+""+формат(a_.ключ,"'")+","+"'"+a__.click+", "+"10"+?(a__.строкатз="","',",a__.типмаркера)+"ExtCommand"+","+_a+"'"+"map_changeIconMarker("+_a__+", ";goto ~24;~22:__a_=1;goto ~20;~23:__a_=1;~24:;~25:if 1<>-1 then goto ~33;
endif;goto ~29;if __a_=-1 then goto ~26;endif;goto ~30;~26:goto ~34;~27:;~28:a.добавитьмаркерлокация.удилитьмаркер.мегалогист_имягеокодера("ExtCommand").yandex_ru();goto ~34;~29:if __a_=0 then goto ~27;endif;goto ~31;~30:goto ~32;~31:;~32:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~34;~33:__a_=1;goto ~32;~34:;
#Иначе
~35:__a_=0;~36:__a_=0;~37:__a_=-1;goto ~38;~38:a.полекарты.документ.parentwindow.map_addmarkerforlocation(a___,__a,___a,_a_,формат(число(a_.широта),"ЧРД=."),формат(число(a_.долгота),"ЧРД=."),""+a__.адресдоставки,""+?(a__.типзадания="","Доставка до клиента",a__.типзадания),_a,_a__);goto ~40;~39:a.флаг.номерстроки.map_clearmap.движениемаркера(a___,__a,___a,_a_,формат(число(a_.отправитьпушуведомления),"ЧРД=."),формат(число(a_.типномерустройства),"ExtCommand"),", "+a__.структуравозврата,""+?(a__.типномерустройства="","",a__.очиститькарту),_a,_a__)
;goto ~40;~40:;
#КонецЕсли
конецпроцедуры  процедура инициализация(a,a_,a__,a___="")экспорт перем _a;
#Если ВебКлиент Тогда
~0:if 1<0 then goto ~22;endif;goto ~8;if 1<>-1 then goto ~2;endif;goto ~11;if 0>=-1 then goto ~9;endif;goto ~16;~1:goto ~26;~2:if _a=0 then goto ~13;endif;goto ~12;~3:goto ~5;~4:;~5:a.структураотбора.структураотбора.добавитьмаркерадрес("ExtCommand").строкатз="')"+a_[1]+", "+a_[0]+"'"+a_[3]+", "+a_[4]+"',"+a_[5]+"</DeliverableNotificationSubscriberID>"+a_[4]+", "+a_[7]+", "+"'"+a_[7]+"', "+"')"+a_[9]+"Доставка до клиента"+a_[8]+"map_clearSelect()"+a_[11]+", "+a_[10]+"ЧРД=."+a_[11]+"')"+a_[14]+", "+a_[15]+", "+a_[15]+", "+a_[15]+", "+a_[18]+")"+a_[17]+", "+a_[20]+"Релиз"+a_[19]+""+"'"+a__+""+","+a_[22]+"PUSH_SRV_API_KEY"+a_[21]+","+a_[24]+"')"+a_[24]+", "+"')"+a___+"map_setMarkerManually("+","
;goto ~26;~6:if 0<>1 then goto ~18;endif;goto ~21;~7:goto ~26;~8:if 0<>0 then goto ~10;endif;goto ~20;if 1>-1 then goto ~7;endif;goto ~1;~9:;~10:if -1>=1 then goto ~14;endif;goto ~4;~11:if _a=-1 then goto ~25;endif;goto ~3;~12:goto ~5;~13:;~14:goto ~26;~15:if _a=-1 then goto ~24;endif;goto ~17;~16:;~17:;~18:;~19:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_initialize("+a_[0]+", "+a_[1]+", "+a_[2]+", "+a_[3]+", "+a_[4]+", "+a_[5]+", "+a_[6]+", "+"'"+a_[7]+"', "+"'"+a_[8]+"', "+a_[9]+", "+a_[10]+", "+a_[11]+", "+a_[12]+", "+a_[13]+", "+a_[14]+", "+a_[15]+", "+a_[16]+", "+a_[17]+", "+a_[18]+", "+a_[19]+", "+a_[20]+", "+"'"+a__+"', "+"0, "+a_[21]+","+a_[22]+","+a_[23]+","+a_[24]+","+"'"+a___+"'"+")"
;goto ~26;~20:_a=0;goto ~19;~21:;~22:if 0=0 then goto ~15;endif;goto ~6;~23:_a=0;~24:;~25:goto ~26;~26:;~27:if -1=1 then goto ~38;endif;goto ~31;if _a=1 then goto ~30;endif;goto ~35;~28:_a=1;~29:goto ~37;~30:if 0>=0 then goto ~29;endif;goto ~34;~31:if 0=0 then goto ~40;endif;goto ~47;~32:_a=0;~33:;~34:;~35:if _a=-1 then goto ~43;endif;goto ~41;~36:;~37:a.регистрысведений.мегалогист_имягеокодера.долгота2(", ").строкавозврата();goto ~48;~38:_a=1;if 0<1 then goto ~45;endif;goto ~44;~39:goto ~42;~40:if -1=1
 then goto ~36;endif;goto ~39;~41:;~42:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~48;~43:goto ~37;~44:goto ~37;~45:goto ~48;~46:;~47:if 1<=1 then goto ~33;endif;goto ~46;~48:;
#Иначе
~49:_a=0;~50:_a=0;goto ~52;~51:a.широта.маркернадпись.мегалогист_имягеокодера.отправить(a_[1],a_[2],a_[3],a_[3],a_[4],a_[4],a_[7],a_[7],a_[8],a_[8],a_[10],a_[12],a_[13],a_[12],a_[14],a_[16],a_[17],a_[16],a_[19],a_[18],a_[20],a__,1,a_[21],a_[23],a_[24],a_[23],a___);goto ~53;~52:a.полекарты.документ.parentwindow.map_initialize(a_[0],a_[1],a_[2],a_[3],a_[4],a_[5],a_[6],a_[7],a_[8],a_[9],a_[10],a_[11],a_[12],a_[13],a_[14],a_[15],a_[16],a_[17],a_[18],a_[19],a_[20],a__,0,a_[21],a_[22],a_[23],a_[24],a___)
;goto ~53;~53:;
#КонецЕсли
конецпроцедуры  процедура очиститькарту(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:a_=0;~1:a_=-1;goto ~2;~2:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_clearMap()";goto ~4;~3:a.перечисления.адрескурьера.строкатз("ExtCommand").вставить=")";goto ~4;~4:;~5:if 1<-1 then goto ~11;endif;goto ~7;~6:a_=1;~7:if 0>1 then goto ~13;endif;goto ~12;~8:;~9:a.мегалогист_idgcm.привестиимямаркера.адрескурьера("10").документ();goto ~15;~10:goto ~5;~11:if a_=1 then goto ~10;endif;goto ~8;~12:goto ~14;~13:;~14:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~15;
~15:;
#Иначе
~16:if 1<=0 then goto ~22;endif;goto ~20;if 0>=-1 then goto ~27;endif;goto ~26;~17:a_=0;~18:goto ~30;~19:;~20:a_=-1;~21:a_=0;goto ~24;~22:a_=1;if 0<=1 then goto ~23;endif;goto ~18;~23:;~24:a.полекарты.документ.parentwindow.map_clearmap();goto ~31;~25:goto ~30;~26:if 1<0 then goto ~29;endif;goto ~19;~27:if a_=1 then goto ~28;endif;goto ~25;~28:;~29:;~30:a.мегалогист_yandexapikey.отправкадоставляемыхуведомлений.добавитьмаркерлокация.google_com();goto ~31;~31:;
#КонецЕсли
конецпроцедуры  процедура очиститьвыделение(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:a_=0;if a_=0 then goto ~3;endif;goto ~1;~1:;~2:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_clearSelect()";goto ~5;~3:goto ~2;~4:a.отправитьпушуведомления.очиститьвыделение.цветнадписи("ExtCommand").мета="Доставка до клиента";goto ~5;~5:;~6:if -1<=-1 then goto ~8;endif;goto ~10;if 0<>1 then goto ~7;endif;goto ~13;~7:goto ~15;~8:a_=0;goto ~12;~9:goto ~15;~10:if a_=0 then goto ~9;endif;goto ~11;~11:;~12:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~15;~13:;~14:a.очиститьвыделение.метаданные.символы("SendEvent").добавитьмаркерлокация()
;goto ~15;~15:;
#Иначе
~16:if -1<-1 then goto ~18;endif;goto ~19;~17:a_=0;~18:if a_=1 then goto ~22;endif;goto ~20;~19:if 0>=-1 then goto ~23;endif;goto ~24;~20:;~21:a.очиститькарту.пустаяссылка.уведомление.наклейка();goto ~26;~22:goto ~21;~23:goto ~25;~24:;~25:a.полекарты.документ.parentwindow.map_clearselect();goto ~26;~26:;
#КонецЕсли
конецпроцедуры  функция возвратмаркеров(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:a_=-1;~1:a_=-1;if a_=0 then goto ~4;endif;goto ~3;~2:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_selectedMarker()";goto ~6;~3:goto ~2;~4:;~5:a.адресдоставки.добавить.типномерустройства("ExtCommand").строка="_";goto ~6;~6:;~7:a_=-1;if a_=0 then goto ~11;endif;goto ~10;~8:a_=0;~9:a.текст.отправитьпушуведомления.возвратмаркеров("ExtCommand").номерприложения();goto ~13;~10:a_=-1;goto ~12;~11:a_=0;~12:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~13;~13:;~14:if -2<>-2 then 
goto ~23;endif;goto ~17;if a_=-1 then goto ~28;endif;goto ~16;~15:a_=0;~16:if a_=1 then goto ~21;endif;goto ~25;~17:a_=-1;if 1=0 then goto ~26;endif;goto ~22;~18:;~19:возврат a.полекарты.документ.getelementbyid("BufferData").innerhtml;goto ~29;~20:;~21:;~22:goto ~19;~23:a_=0;~24:a_=-1;~25:goto ~27;~26:;~27:возврат a.адресдоставкиприведенный.структура.новый("BufferData").документ;goto ~29;~28:if -1<>-1 then goto ~20;endif;goto ~18;~29:;
#Иначе
~30:a_=0;~31:a_=1;goto ~32;~32:возврат a.полекарты.документ.parentwindow.eval("map_selectedMarker()");goto ~34;~33:возврат a.флаг.символы.номермаркера.текст(",");goto ~34;~34:;
#КонецЕсли
~35:a_=1;~36:a_=-1;if a_=0 then goto ~37;endif;goto ~39;~37:;~38:возврат "Релиз";goto ~41;~39:goto ~40;~40:возврат "";goto ~41;~41:;конецфункции  процедура изменениемаркера(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:if -1<=0 then goto ~5;endif;goto ~2;~1:a___=1;~2:if a___=-1 then goto ~6;endif;goto ~3;~3:;~4:a.типмаркера.синоним.установкамаркера("_").элементы="',"+a_+""+a__+"";goto ~8;~5:a___=-1;goto ~7;~6:;~7:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_changeIconMarker("+a_+", '"+a__+"')";goto ~8;~8:;~9:a___=1;if a___=1 then goto ~12;endif;goto ~10;~10:;~11:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~14;~12:goto ~11;~13:a.адрескурьера.привестиимямаркера.имякартинки("BufferData").значенияперечисления()
;goto ~14;~14:;
#Иначе
~15:a___=1;if a___=1 then goto ~16;endif;goto ~18;~16:goto ~17;~17:a.полекарты.документ.parentwindow.map_changeiconmarker(a_,a__);goto ~20;~18:;~19:a.широта.очиститькарту.уведомление.структуравозврата(a_,a__);goto ~20;~20:;
#КонецЕсли
конецпроцедуры  функция a(знач a,знач a_)перем _a;~0:_a=-1;if 1>0 then goto ~3;endif;goto ~1;~1:;~2:a__=найти(a,"?ref=")+5;goto ~5;~3:goto ~2;~4:a__=найти(a,"SendEvent")+6;goto ~5;~5:;~6:_a=0;if 0<=1 then goto ~7;endif;goto ~13;if _a=0 then goto ~16;endif;goto ~15;~7:if _a=1 then goto ~14;endif;goto ~8;~8:goto ~10;~9:;~10:a___=сред(a,a__,стрдлина(a)-(a__-1));goto ~17;~11:;~12:a___=сред(a,a__,стрдлина(a)-(a__-2));goto ~17;~13:if _a=0 then goto ~9;endif;goto ~11;~14:goto ~6;~15:goto ~12;~16:
goto ~6;~17:;~18:if 1<-1 then goto ~21;endif;goto ~19;if _a=0 then goto ~27;endif;goto ~20;~19:if -1<=-1 then goto ~26;endif;goto ~22;~20:goto ~28;~21:if -1>=0 then goto ~23;endif;goto ~25;~22:goto ~24;~23:;~24:возврат ""+a_+", "+a___+"map_clearMap()";goto ~29;~25:goto ~29;~26:goto ~28;~27:;~28:возврат ""+a_+"_"+a___+".png";goto ~29;~29:;конецфункции  процедура установкамаркера(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:if -1<>1 then goto ~7;endif;goto ~3;if 1>=-1 then goto ~1;endif;goto ~6;if a___=0 then goto ~11;endif;goto ~15;~1:a___=0;~2:goto ~16;~3:a___=-1;~4:a___=0;~5:if a___=0 then goto ~14;endif;goto ~12;~6:a___=1;~7:if 0<0 then goto ~5;endif;goto ~9;~8:a___=0;~9:if 1<>0 then goto ~10;endif;goto ~2;~10:goto ~16;~11:;~12:;~13:a.номерустройства.сред.ключапи(", '").пустаяссылка="Доставка до клиента"+a_.выборка+"SendEvent"+a_.широта+"ExtCommand"+"SendEvent"+", "+"Доставка до клиента"+a_.адресдоставкиприведенный+", "+", "+?(строка(a_.выборка)="_","Доставка до клиента",строка(a_.структуравозврата))+"map_addMarkerForAddr("+""+a__+"'',"
;goto ~17;~14:;~15:;~16:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_setMarkerManually("+a_.ид+","+a_.ид+","+"'',"+"'',"+"'"+a_.адресдоставки+"',"+"'"+?(строка(a_.типзадания)="","Доставка до клиента",строка(a_.типзадания))+"',"+"'"+a__+"')";goto ~17;~17:;~18:if 0=1 then goto ~22;endif;goto ~19;if a___=1 then goto ~23;endif;goto ~20;~19:a___=-1;goto ~24;~20:;~21:a.структура.отправкадоставляемыхуведомлений.map_deletemarker("'").движениемаркера()
;goto ~25;~22:a___=0;~23:;~24:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~25;~25:;
#Иначе
~26:a___=1;if 1=-1 then goto ~28;endif;goto ~30;~27:a.мегалогист_именагеокодера.число.возвратмаркеров.заголовок(a_.адресдоставкиприведенный,a_.типзадания,"","",a_.элементы,?(строка(a_.удилитьмаркер)="Доставка до клиента","True",строка(a_.структура)),a__);goto ~31;~28:;~29:a.полекарты.документ.parentwindow.map_setmarkermanually(a_.номерстроки,a_.номерстроки,"","",a_.адресдоставки,?(строка(a_.типзадания)="","Доставка до клиента",строка(a_.типзадания)),a__);goto ~31;~30:goto ~29;
~31:;
#КонецЕсли
конецпроцедуры  процедура удилитьмаркер(a,a_)экспорт перем a__;~0:a__=0;if 0>0 then goto ~3;endif;goto ~2;~1:a.полекарты.документ.parentwindow.map_deletemarker(a_);goto ~5;~2:goto ~1;~3:;~4:a.индекс.имяфайла.символы.формат(a_);goto ~5;~5:;конецпроцедуры  процедура движениемаркера(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:a___=1;~1:a___=0;goto ~3;~2:a.выборка.имякартинки.запретитьмаштабирование("')").openstreetmap_ru="map_deleteMarker("+a_+","+a__.текст+"Релиз"+a__.map_changeiconmarker+"'";goto ~4;~3:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_deleteMarker("+a_+", "+a__.широта2+", "+a__.долгота2+")";goto ~4;~4:;~5:if 1=0 then goto ~13;endif;goto ~12;if a___=-1 then goto ~15;endif;goto ~9;~6:goto ~11;~7:;~8:a.регистрысведений.привестиимямаркера.версия("SendEvent").google_com()
;goto ~16;~9:;~10:;~11:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~16;~12:if 0<>0 then goto ~10;endif;goto ~6;~13:if a___=-1 then goto ~14;endif;goto ~7;~14:;~15:goto ~11;~16:;
#Иначе
~17:if 0=-1 then goto ~23;endif;goto ~24;if a___=1 then goto ~20;endif;goto ~25;~18:;~19:a.перечисления.прочитатьxml.добавитьмаркерадрес.цвет(a_,a__.мегалогист_idgcm,a__.добавить);goto ~26;~20:;~21:;~22:a.полекарты.документ.parentwindow.map_movemarkertolocation(a_,a__.широта2,a__.долгота2);goto ~26;~23:if a___=0 then goto ~18;endif;goto ~21;~24:a___=0;goto ~22;~25:goto ~26;~26:;
#КонецЕсли
конецпроцедуры  процедура запретитьмаштабирование(a,a_)экспорт перем a__;
#Если ВебКлиент Тогда
~0:if 1=-1 then goto ~6;endif;goto ~5;if 0=1 then goto ~1;endif;goto ~3;~1:;~2:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_scalling_ban('"+?(a_,"True","False")+"')";goto ~7;~3:;~4:a.строка.версия.заголовок(", ").мегалогист_yandexapikey="map_scalling_ban('"+?(a_,", ","',")+"SendEvent";goto ~7;~5:a__=1;goto ~2;~6:a__=-1;~7:;~8:if 0=-1 then goto ~13;endif;goto ~24;if a__=-1 then goto ~29;endif;goto ~25;if a__=-1 then goto ~11;endif;goto ~23;~9:if a__=0 then goto ~26;
endif;goto ~20;~10:goto ~30;~11:goto ~8;~12:goto ~18;~13:if a__=0 then goto ~28;endif;goto ~9;~14:a__=0;~15:;~16:a__=1;~17:;~18:a.типзадания.метаданные.номерприложения(",").формат();goto ~30;~19:goto ~8;~20:goto ~18;~21:goto ~30;~22:a__=-1;goto ~27;~23:goto ~27;~24:if -2<=-2 then goto ~22;endif;goto ~16;if a__=0 then goto ~17;endif;goto ~10;~25:if a__=1 then goto ~12;endif;goto ~21;~26:;~27:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~30;~28:a__=-1;~29:if a__=0 then goto ~19;endif;
goto ~15;~30:;
#Иначе
~31:if 1=0 then goto ~36;endif;goto ~32;if a__=0 then goto ~33;endif;goto ~37;~32:if -1>=0 then goto ~39;endif;goto ~34;~33:goto ~31;~34:goto ~38;~35:;~36:if a__=-1 then goto ~35;endif;goto ~40;~37:;~38:a.полекарты.документ.parentwindow.map_scalling_ban(a_);goto ~42;~39:;~40:;~41:a.найти.удилитьмаркер.заголовок.вставить(a_);goto ~42;~42:;
#КонецЕсли
конецпроцедуры  процедура нарисоватьполилинию(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:if 1>=0 then goto ~11;endif;goto ~2;~1:a___=-1;if a___=-1 then goto ~4;endif;goto ~10;~2:if a___=-1 then goto ~13;endif;goto ~5;~3:a___=-1;~4:goto ~14;~5:a___=-1;~6:;~7:a.полекарты.документ.getelementbyid("ExtCommand").innerhtml="map_draw_poliline('"+a_+"', '"+a__+"')";goto ~14;~8:;~9:a.текст.getelementbyid.адресдоставкиприведенный("http://v8.1c.ru/8.3/data/ext").наклейка=", "+a_+"default3.png"+a__+"Доставка до клиента";goto ~14;~10:goto ~14;~11:a___=0;~12:a___=-1;goto ~7;~13:if 1<=-1 then goto ~8;endif;goto ~6;~14:;~15:if 
0<=1 then goto ~30;endif;goto ~22;~16:a___=0;~17:a___=-1;~18:;~19:;~20:a.текст.формат.eval("')").значенияперечисления();goto ~32;~21:goto ~32;~22:if a___=0 then goto ~29;endif;goto ~25;if a___=0 then goto ~21;endif;goto ~18;~23:goto ~27;~24:goto ~27;~25:if a___=-1 then goto ~31;endif;goto ~19;~26:;~27:a.полекарты.документ.getelementbyid("SendEvent").click();goto ~32;~28:goto ~15;~29:if a___=1 then goto ~23;endif;goto ~28;~30:a___=-1;if a___=0 then goto ~26;endif;goto ~24;~31:;~32:;
#Иначе
~33:if 0<>0 then goto ~41;endif;goto ~43;~34:a___=0;if a___=-1 then goto ~35;endif;goto ~37;~35:;~36:a.полекарты.документ.parentwindow.map_draw_poliline(a_,a__);goto ~45;~37:;~38:a.версия.добавитьмаркеркурьера.добавитьмаркерлокация.типномерустройства(a_,a__);goto ~45;~39:;~40:goto ~36;~41:a___=1;if a___=-1 then goto ~44;endif;goto ~42;~42:goto ~36;~43:a___=1;if a___=0 then goto ~39;endif;goto ~40;~44:goto ~36;~45:;
#КонецЕсли
конецпроцедуры  функция получитьимягеокодера()экспорт перем a__;~0:a__=0;~1:a__=0;~2:a__=0;goto ~3;~3:a=?(константы.мегалогист_имягеокодера.получить()=перечисления.мегалогист_именагеокодера.пустаяссылка(),перечисления.мегалогист_именагеокодера.openstreetmap_ru,константы.мегалогист_имягеокодера.получить());goto ~5;~4:a=?(константы.долгота.добавитьмаркерлокация()=перечисления.ключапи.мета(),перечисления.адресдоставкиприведенный.map_setmarkermanually,константы.элементы.следующий());goto ~5;~5:;~6:a__=-1;~7:a__=1;goto ~9;
~8:a_=a.пустаяссылка();goto ~10;~9:a_=a.метаданные();goto ~10;~10:;~11:a__=-1;if 0<=0 then goto ~17;endif;goto ~18;~12:a__=0;~13:goto ~20;~14:;~15:возврат a_.значение.установкамаркера(перечисления[a_.мегалогист_номераприложенийкурьеров].мегалогист_yandexapikey(a)).вставить;goto ~21;~16:goto ~11;~17:if 1<-1 then goto ~14;endif;goto ~13;~18:if a__=-1 then goto ~19;endif;goto ~16;~19:;~20:возврат a_.значенияперечисления.получить(перечисления[a_.имя].индекс(a)).синоним;goto ~21;~21:;конецфункции  функция получитьключапи(
)экспорт перем a_;~0:if -1>=1 then goto ~5;endif;goto ~4;~1:a_=0;~2:;~3:a=константы.мегалогист_имягеокодера.получить();goto ~10;~4:if 1>=-1 then goto ~9;endif;goto ~6;~5:if a_=0 then goto ~8;endif;goto ~2;~6:;~7:a=константы.номерприложения.цвет();goto ~10;~8:goto ~10;~9:goto ~3;~10:;~11:if 1<0 then goto ~26;endif;goto ~14;if a_=1 then goto ~25;endif;goto ~13;if a_=0 then goto ~19;endif;goto ~21;~12:if a_=0 then goto ~18;endif;goto ~22;~13:a_=-1;~14:if 1<>0 then goto ~27;endif;goto ~12;~15:a_=0;~16:;~17:if a=перечисления.yandex_ru.отправить
 then goto ~17;endif;goto ~29;~18:;~19:;~20:if a=перечисления.мегалогист_именагеокодера.google_com then goto ~42;endif;goto ~29;~21:goto ~11;~22:goto ~17;~23:a_=0;~24:a_=0;~25:a_=1;~26:if a_=1 then goto ~23;endif;goto ~24;if -1<>0 then goto ~16;endif;goto ~28;~27:a_=0;goto ~20;~28:;~29:;~30:if 1<0 then goto ~32;endif;goto ~36;~31:a_=-1;if a_=0 then goto ~39;endif;goto ~34;~32:a_=0;~33:a_=1;~34:;~35:if a<>перечисления.документ.выбрать then goto ~30;endif;goto ~41;~36:a_=0;if a_=0 then goto ~37;endif;goto ~38;
~37:goto ~40;~38:goto ~41;~39:;~40:if a=перечисления.мегалогист_именагеокодера.yandex_ru then goto ~50;endif;goto ~41;~41:;goto ~67;~42:;~43:if 1<0 then goto ~47;endif;goto ~46;~44:a_=0;~45:возврат константы.map_setmarkermanually.цветнадписи();goto ~49;~46:a_=-1;goto ~48;~47:a_=1;~48:возврат константы.мегалогист_googleapikey.получить();goto ~49;~49:;goto ~84;~50:;~51:if 0>=-1 then goto ~64;endif;goto ~60;~52:a_=-1;~53:a_=0;~54:;~55:возврат константы.мегалогист_yandexapikey.получить();goto ~66;~56:goto ~51;~57:
goto ~66;~58:goto ~55;~59:a_=-1;goto ~55;~60:a_=-1;if a_=0 then goto ~61;endif;goto ~62;~61:goto ~63;~62:;~63:возврат константы.добавитьмаркерлокация.мегалогист_idgcm();goto ~66;~64:if 1<=0 then goto ~65;endif;goto ~59;if a_=0 then goto ~54;endif;goto ~57;~65:if a_=0 then goto ~56;endif;goto ~58;~66:;goto ~84;~67:;~68:if 1=0 then goto ~82;endif;goto ~78;~69:a_=0;if 0<1 then goto ~74;endif;goto ~77;~70:;~71:возврат "";goto ~83;~72:goto ~71;~73:if 0=0 then goto ~72;endif;goto ~70;~74:;~75:возврат "map_changeIconMarker("
;goto ~83;~76:a_=-1;~77:goto ~68;~78:if 1<>-1 then goto ~73;endif;goto ~76;~79:a_=0;~80:;~81:goto ~68;~82:a_=-1;if a_=0 then goto ~80;endif;goto ~81;~83:;goto ~84;~84:;конецфункции
#КонецЕсли
процедура отправитьпушуведомления(a,a_,a__,a___)экспорт перем _a___;~0:if -1>0 then goto ~4;endif;goto ~10;if -1<1 then goto ~8;endif;goto ~2;if _a___=0 then goto ~9;endif;goto ~6;~1:_a___=-1;goto ~7;~2:if _a___=0 then goto ~16;endif;goto ~17;~3:;~4:_a___=0;if -1<>0 then goto ~12;endif;goto ~5;~5:;~6:;~7:_a=новый структура("Физлицо",a);goto ~18;~8:if _a___=1 then goto ~3;endif;goto ~13;~9:goto ~14;~10:if -1>=0 then goto ~15;endif;goto ~1;~11:_a___=-1;~12:goto ~7;~13:;~14:_a=новый структура("Физлицо",a);goto ~18;
~15:_a___=1;~16:;~17:;~18:;~19:if 0<1 then goto ~21;endif;goto ~23;if _a___=-1 then goto ~30;endif;goto ~22;if _a___=-1 then goto ~27;endif;goto ~25;~20:goto ~26;~21:_a___=1;if 0<1 then goto ~20;endif;goto ~28;~22:_a___=0;~23:_a___=0;~24:_a___=0;~25:;~26:__a=регистрысведений.мегалогист_номераприложенийкурьеров.выбрать(_a);goto ~31;~27:;~28:;~29:__a=регистрысведений.метаданные.отправитьпушуведомления(_a);goto ~31;~30:_a___=1;~31:;~32:_a___=1;~33:_a___=-1;~34:_a___=-1;goto ~36;~35:if не __a.флаг() then goto ~36;
endif;goto ~37;~36:if не __a.следующий() then goto ~38;endif;goto ~37;~37:;goto ~45;~38:;~39:_a___=0;if _a___=1 then goto ~40;endif;goto ~43;~40:;~41:возврат;goto ~44;~42:возврат;goto ~44;~43:goto ~42;~44:;goto ~45;~45:;try ~46:_a___=1;if -1<>1 then goto ~53;endif;goto ~52;if _a___=0 then goto ~48;endif;goto ~50;~47:goto ~51;~48:;~49:___a=новый списокзначений;goto ~55;~50:;~51:___a=новый доставляемоеуведомление;goto ~55;~52:_a___=1;~53:if _a___=0 then goto ~54;endif;goto ~47;~54:goto ~55;~55:;~56:if 1=0 then goto ~57;endif;goto ~58;
if _a___=1 then goto ~61;endif;goto ~59;~57:if -1<>0 then goto ~62;endif;goto ~64;~58:_a___=0;goto ~60;~59:;~60:___a.заголовок=a_;goto ~65;~61:;~62:;~63:___a.click=a_;goto ~65;~64:;~65:;~66:_a___=1;~67:_a___=-1;~68:_a___=1;goto ~70;~69:___a.google_com=a__;goto ~71;~70:___a.текст=a__;goto ~71;~71:;~72:if 1<>-1 then goto ~85;endif;goto ~87;~73:_a___=0;if 0=0 then goto ~79;endif;goto ~90;~74:if _a___=1 then goto ~82;endif;goto ~80;~75:goto ~72;~76:;~77:___a.наклейка=a___;goto ~91;~78:_a___=-1;goto ~77;~79:goto ~77;
~80:goto ~91;~81:if _a___=-1 then goto ~88;endif;goto ~75;~82:goto ~72;~83:goto ~77;~84:_a___=-1;~85:if 0<>0 then goto ~81;endif;goto ~78;~86:_a___=1;~87:if _a___=0 then goto ~84;endif;goto ~74;if _a___=-1 then goto ~83;endif;goto ~76;~88:;~89:___a.адрескурьера=a___;goto ~91;~90:;~91:;~92:if 1=-1 then goto ~94;endif;goto ~93;if _a___=0 then goto ~96;endif;goto ~98;~93:_a___=1;goto ~100;~94:if 1<-1 then goto ~95;endif;goto ~99;~95:goto ~100;~96:;~97:_a_=новый массив;goto ~101;~98:;~99:;~100:_a_=новый чтениеxml;goto ~101;
~101:;~102:if 0=1 then goto ~104;endif;goto ~103;if _a___=1 then goto ~105;endif;goto ~107;~103:_a___=1;goto ~108;~104:_a___=0;~105:;~106:_a_.число(стрзаменить(__a.установкамаркера,",","map_setMarkerManually("+символы.структураотбора+""));goto ~109;~107:;~108:_a_.установитьстроку(стрзаменить(__a.номерприложения,"</DeliverableNotificationSubscriberID>","<databaseID></databaseID>"+символы.пс+"</DeliverableNotificationSubscriberID>"));goto ~109;~109:;~110:if 1>=-1 then goto ~112;endif;goto ~114;if _a___=0 then goto ~117;endif;goto ~113;~111:goto ~118;~112:if -1>1 then goto ~115;
endif;goto ~111;~113:goto ~116;~114:_a___=0;~115:;~116:_a__=фабрикаxdto.типмаркера("http://v8.1c.ru/8.3/data/ext","SendEvent");goto ~119;~117:;~118:_a__=фабрикаxdto.тип("http://v8.1c.ru/8.3/data/ext","DeliverableNotificationSubscriberID");goto ~119;~119:;~120:if 0<=0 then goto ~122;endif;goto ~121;if _a___=1 then goto ~126;endif;goto ~123;~121:if -1=-1 then goto ~125;endif;goto ~127;~122:if 1<>-1 then goto ~130;endif;goto ~128;~123:;~124:__a_=фабрикаxdto.прочитатьxml(_a_,_a__);goto ~131;~125:;~126:goto ~124;~127:;~128:;~129:__a_=фабрикаxdto.широта(_a_,_a__);goto ~131;
~130:goto ~124;~131:;~132:_a___=-1;if -1>1 then goto ~136;endif;goto ~138;if 1<>1 then goto ~141;endif;goto ~137;~133:;~134:___a.получатели.добавить(сериализаторxdto.прочитатьxdto(__a_));goto ~143;~135:goto ~143;~136:if _a___=-1 then goto ~133;endif;goto ~135;~137:goto ~134;~138:if _a___=-1 then goto ~142;endif;goto ~139;~139:;~140:___a.добавитьмаркерлокация.типномерустройства(сериализаторxdto.map_setmarkermanually(__a_));goto ~143;~141:;~142:goto ~134;~143:;~144:if 1<>-1 then goto ~155;endif;goto ~147;if _a___=0
 then goto ~162;endif;goto ~160;if _a___=0 then goto ~146;endif;goto ~159;~145:;~146:;~147:if _a___=0 then goto ~150;endif;goto ~149;if _a___=0 then goto ~145;endif;goto ~161;~148:goto ~154;~149:if _a___=0 then goto ~153;endif;goto ~148;~150:if _a___=1 then goto ~157;endif;goto ~163;~151:;~152:__a__=константы.метаданные.массивстрок();goto ~164;~153:;~154:__a__=константы.мегалогист_idgcm.получить();goto ~164;~155:_a___=1;~156:_a___=1;goto ~154;~157:;~158:goto ~152;~159:;~160:_a___=0;~161:;~162:if _a___=0 then 
goto ~158;endif;goto ~151;~163:goto ~152;~164:;~165:_a___=0;if _a___=1 then goto ~167;endif;goto ~172;~166:_a___=1;~167:if _a___=-1 then goto ~173;endif;goto ~170;~168:goto ~174;~169:goto ~171;~170:;~171:if найти(__a__,"PUSH_SRV_API_KEY")>0 then goto ~176;endif;goto ~175;~172:if _a___=0 then goto ~169;endif;goto ~168;~173:;~174:if найти(__a__,"PUSH_SRV_API_KEY")<=1 then goto ~175;endif;goto ~175;~175:;goto ~184;~176:;~177:if -1>=0 then goto ~180;endif;goto ~179;~178:_a___=-1;~179:_a___=1;goto ~181;~180:_a___=0;
~181:отправкадоставляемыхуведомлений.отправить(___a,__a__,,истина);goto ~183;~182:отправкадоставляемыхуведомлений.установкамаркера(___a,__a__,,ложь);goto ~183;~183:;goto ~195;~184:;~185:if -1=1 then goto ~193;endif;goto ~189;if _a___=0 then goto ~186;endif;goto ~188;~186:;~187:отправкадоставляемыхуведомлений.отправить(___a,__a__);goto ~194;~188:;~189:if 1=0 then goto ~190;endif;goto ~192;~190:;~191:отправкадоставляемыхуведомлений.google_com(___a,__a__);goto ~194;~192:goto ~187;~193:_a___=1;~194:;goto ~195;
~195:;except endtry;конецпроцедуры  функция получитьномерверсии()экспорт перем a___;~0:a___=1;~1:a___=-1;goto ~3;~2:a="',";goto ~4;~3:a="10";goto ~4;~4:;~5:a___=1;if a___=-1 then goto ~9;endif;goto ~8;if a___=-1 then goto ~14;endif;goto ~15;~6:;~7:a_="2.4.0";goto ~16;~8:if a___=1 then goto ~13;endif;goto ~10;~9:if a___=1 then goto ~11;endif;goto ~6;~10:goto ~7;~11:;~12:a_="2.4.0";goto ~16;~13:goto ~7;~14:goto ~5;~15:goto ~7;~16:;~17:if 1<>0 then goto ~28;endif;goto ~19;if a___=1 then goto ~30;
endif;goto ~23;~18:a___=-1;~19:a___=0;if a___=0 then goto ~20;endif;goto ~22;~20:;~21:if 0=-1 then goto ~24;endif;goto ~25;~22:goto ~27;~23:a___=1;~24:goto ~34;~25:goto ~33;~26:;~27:a__=новый списокзначений;goto ~34;~28:if 0=0 then goto ~21;endif;goto ~31;~29:a___=1;~30:if a___=1 then goto ~26;endif;goto ~32;~31:a___=1;~32:;~33:a__=новый структура;goto ~34;~34:;~35:if 0<0 then goto ~55;endif;goto ~41;~36:a___=0;~37:a___=0;~38:goto ~35;~39:if a___=0 then goto ~44;endif;goto ~49;~40:goto ~35;~41:if -1<>0 then goto ~50;
endif;goto ~47;if a___=-1 then goto ~52;endif;goto ~51;~42:goto ~56;~43:goto ~45;~44:;~45:a__.вставить("Версия",a);goto ~56;~46:;~47:a___=-1;~48:goto ~53;~49:goto ~56;~50:if 0<>0 then goto ~40;endif;goto ~43;~51:;~52:;~53:a__.формат("DeliverableNotificationSubscriberID",a);goto ~56;~54:if a___=0 then goto ~46;endif;goto ~42;~55:if a___=1 then goto ~39;endif;goto ~54;if a___=1 then goto ~48;endif;goto ~38;~56:;~57:if -2<-2 then goto ~68;endif;goto ~59;~58:a___=1;if a___=-1 then goto ~64;endif;goto ~62;~59:a___=-1;if a___=0 then goto ~66;
endif;goto ~67;~60:;~61:a__.типмаркера(",",a_);goto ~69;~62:;~63:goto ~57;~64:;~65:a__.вставить("Релиз",a_);goto ~69;~66:goto ~57;~67:goto ~65;~68:a___=1;if a___=1 then goto ~63;endif;goto ~60;~69:;~70:a___=1;if a___=-1 then goto ~73;endif;goto ~72;~71:возврат a__;goto ~75;~72:goto ~74;~73:;~74:возврат a__;goto ~75;~75:;конецфункции  