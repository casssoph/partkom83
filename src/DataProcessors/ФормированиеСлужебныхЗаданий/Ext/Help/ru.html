<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o="urn:schemas-microsoft-com:office:office"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.18666"></meta></head><body>
<p class="MsoNormal" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 8pt"><b style="mso-bidi-font-weight: normal"><span style="COLOR: #2e74b5; mso-themecolor: accent1; mso-themeshade: 191; mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">Инструкция по формированию Служебных заданий в 1с83.</font></font></span></b></p>
<p class="MsoNormal" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 8pt"><span style="COLOR: #2e74b5; mso-themecolor: accent1; mso-themeshade: 191; mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><font color="#000000"><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font size="3" face="Calibri"><strong>1.</strong></font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span><b style="mso-bidi-font-weight: normal"><font size="3"><font face="Calibri"><span style="mso-fareast-language: RU; mso-no-proof: yes">Основные тезисы:</span></font></font></b></font></font></font></span></p><span style="COLOR: #2e74b5; mso-themecolor: accent1; mso-themeshade: 191; mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><font color="#000000"><font size="3"><font face="Calibri"><span style="mso-fareast-language: RU; mso-no-proof: yes">
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- Формирование Служебного задания (дале СЗ) возможно как в автоматическом режиме (как результат работы Регламентного задания и спр.Параметры формирования СЗ), так и в ручном (в интерактиве). В обоих случаях используются одни и те же процедуры и ф-ии, тем самым обеспечивая единообразие в расчетах. Только в одном случае параметры заполняются согласно алгоритму, а в другом - в зависимости от поделаний пользователя.</font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">- Помимо параметров, которые можно задать через спр.Регламентных заданий перед запуском обработки (их же можно редактировать на форме в случае интерактивного режима работы), существуют параметры, которые заполняются значениями по умолчанию. В случае необходимости, можно зайти в процедуру модуля объекта "УстановитьПараметрыПоУмолчанию();" и явно указать желаемое значение. В качестве примера: ИспользоватьРеквизит_СкладДубль, ИспользоватьРеквизит_флОтгружатьЮрФизЛицам, РазрешитьЗаписьВЛогФайл, КаталогЛогФайлов, ИмяЛогФайлаПолное, Аларм_Источник, Аларм_Заголовок, МаксимальноеКоличествоПопытокЗаписатьДокумент.</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">- В одно СЗ, т.е. на один Филиал, Склад, на один Маршрут, тип доставки и т.п. может быть добавлено n-реализаций по n-заявкам в соответствии с остатками по резервам. Обход данных по группировкам соответствует наборам реквизитов шапки документов.</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">- Если запуск обработки выполнен вручную, то СЗ всегда создаются новые, а если автоматом, то сначала выполняется поиск подходящего (по принципу: на один склад одно основание в день).</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">- На момент расчета игнорируются 'активированные' договора, т.е. те, по которым начат процесс расчета резервов, проверка долгов.. и не завершена процедура формирования СЗ. Это необходимо для того, что бы не пересеклись расчеты в авторежиме и интерактивном, или когда роботов больше чем один. Таким образом, Договор КА одномоментно может участвовать не более чем в одном расчете (по складу, маршруту, филиалу).</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">- </span><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">Сумма плановой отгрузки вычисляется как произведение количественного Остатка по резерву на РезервыТоваровОстатки.СтрокаЗаявки.Цена ,т.е. цену продажи мы берем не из строчной части Заявки или конечной Корректировки.   Цена закупки так же берется из <a href="Catalog.ИдентификаторыСтрокЗаявок/Help"><font color="#0066cc">спр.СтрокЗаявок.</font></a> Была достигнута договоренность о том, что данные в карточке СтрокиЗаявки поддерживаются в актуальном состоянии, позволяя не делать лишних 'джойнов'.</span></font></font></span></p></span>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- Отказоустойчивость процедуры обеспечивается тем, что запись в базу новых объектов выполняется только только при условии, что необходимые данные уже прочитаны, подобраны и шаблон будущих документов полностью заполнен. Т.е процесс не растянут во времени с момента получения ссылок и до обработки последнего в цикле объекта. Транзакция открывается и закрывается по каждому из объектов, обеспечивая единовременную запись<a href="Document.СлужебноеЗадание/Help"> документа СЗ</a> и сопуствующих данных (<a href="Document.РеализацияТоваровУслуг/Help">док-ты Реализации</a>, ДеАктивация Договоров КА в  <a href="InformationRegister.ИсторияФормированияСлужебныхЗаданий/Help">РегистрыСведений.ИсторияФормированияСлужебныхЗаданий</a>). Открытие транзакции выполняется в попытке, при исключении – она откатывается. Для каждого объекта предусмотрено до 3 попыток в случае востановимых ошибок базы.</font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p></o:p></font></font></span> </p><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p><p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; TEXT-INDENT: -18pt; mso-list: l0 level1 lfo1; mso-add-space: auto"><b style="mso-bidi-font-weight: normal"><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font size="3" face="Calibri">2.</font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span></b><b style="mso-bidi-font-weight: normal"><font size="3"><font face="Calibri">Настройка Автозапуска</font></font></b></p></o:p></font></font></span>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p>Для всех обработок, запускаемых по расписанию из <a href="Catalog.РегламентныеЗадания/Help">спр.Регламентные задания</a>, в модуле объекта присутствует процедура ВыполнитьРегламентноеЗадание(). В данном случае, прежде, чем перейти к непосредственному запуску процесса формирования СЗ, выполняется проверка на 'имя сценария' и то, что база является рабочей. Иными словами, для автозапуска необходимо, чтобы база являлась рабочей и был правильно указан сценарий. На данный момент в списке сценариев оставлена одна запись 'АвтозапускФормированияСЗ()'. </o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p>После прохождения контроля, выполняется поиск заданий, описанных в <a href="Catalog.ПараметрыФормированияСлужебныхЗаданий/Help">спр.ПараметрыФормированияСлужебныхЗаданий</a>. </o:p></font></font></span><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p>В случае обнаружения заданий, подходящих по расписанию, выполняется поочередный расчет по каждому из оснований, описанных в спр.</o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p>Таким образом, периодичность опроса спр.параметров формирования СЗ описывается в расписании при настройке регламентного задания. Например, каждый день с 09-00 до 16-00 каждые 5 минут, после чего, при запуске обработки выполняется поиск заданий и их последующая обработка. Задания должны удовлетворять следующим параметрам: соответствовать дню недели, чтобы расчет состоялся не раньше и не позже времени, указанного в  задании (реквизиты ВремяЗапуска и ВремОкончанияДовыписки), чтобы с момента последнего расчета прошло не меньше, чем указано в реквизите 'интервал' задания (например довыписка каждые 40 минут).</o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><o:p></o:p></font></font></span> </p></font></font></font></font></font></span><span style="COLOR: #2e74b5; mso-themecolor: accent1; mso-themeshade: 191; mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><font color="#000000"><font size="3"><font face="Calibri"><span style="mso-fareast-language: RU; mso-no-proof: yes">
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; TEXT-INDENT: -18pt; mso-list: l0 level1 lfo1; mso-add-space: auto"><b style="mso-bidi-font-weight: normal"><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font size="3" face="Calibri">3.</font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span></b><b style="mso-bidi-font-weight: normal"><font size="3"><font face="Calibri">Местонахождение программного кода<o:p></o:p></font></font></b></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><font size="3">Обработка загрузки сообщения выполняется в модуле объекта обработки<a href="ФормированиеСлужебныхЗаданий"> </a><i style="mso-bidi-font-style: normal"><a href="ФормированиеСлужебныхЗаданий">ФормированиеСлужебныхЗаданий</a> встроенной в конфигурацию</i></font></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><o:p></o:p></font></i></font> </p></span></font></font></font></font></font></span><span style="COLOR: #2e74b5; mso-themecolor: accent1; mso-themeshade: 191; mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><font color="#000000"><font size="3"><font face="Calibri"><span style="mso-fareast-language: RU; mso-no-proof: yes">
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; TEXT-INDENT: -18pt; mso-list: l0 level1 lfo1; mso-add-space: auto"><b style="mso-bidi-font-weight: normal"><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font size="3" face="Calibri">4.</font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span></b><b style="mso-bidi-font-weight: normal"><font size="3"><font face="Calibri">Оповещение<o:p></o:p></font></font></b></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><font size="3">В случае обнаружения проблем (т.е. лог, содержащий ошибки, возникшие в процессе формировани СЗ, не пустой) выполняется рассылка по <span lang="EN-US" style="mso-ansi-language: EN-US">e</span></font><font size="3">-</font><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">mail</font></span><font size="3">, в соответствии с настройками в<o:p></o:p></font></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><font size="3"><a href="Catalog.СобытияДляОтправкиЭлектронныхПисем/Help"><em>Справочники.СобытияДляОтправкиЭлектронныхПисем.</em>ОшибкаФормированияСлужебногоЗадания</a> </font><font size="3">и </font><i style="mso-bidi-font-style: normal"><font size="3"><a href="InformationRegister.НастройкиОтправкиСообщенийОбОшибках/Help">РегистрСведений.НастройкиОтправкиСообщенийОбОшибках</a></font></i><font size="3">.<o:p></o:p></font></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font size="3"><font face="Calibri">Помимо этого, лог дописывается в файл (см. параметр ИмяЛогФайлаПолное) </font></font><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><a href="file://\\Srv1c-nn\1C_exch\ASTOR_1C\push\Log\">\\</a></font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">Srv</font></span><font size="3">1</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">c</font></span><font size="3">-</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">nn</font></span><font size="3">\1</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">C</font></span><font size="3">_</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">exch</font></span><font size="3">\</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">ASTOR</font></span><font size="3">_1</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">C</font></span><font size="3">\</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">push</font></span><font size="3">\</font></i><i style="mso-bidi-font-style: normal"><span lang="EN-US" style="mso-ansi-language: EN-US"><font size="3">Log</font></span><font size="3">\ 1с83_СЗ_метка</font></i><i style="mso-bidi-font-style: normal"><font size="3">.</font></i><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US">txt, </span></font></i></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US">где метка - это характеризующая процес строка, включающая в себя :</span></font></i></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US">- дату/время вызова обработки</span></font></i></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US">- строку соединения с БД, т.е. место вызова обработки</span></font></i></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US">- пользователя, под которым был выполнен вызов</span></font></i></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US">- имя запущенного сценария, имеет смысл для автозапуска</span></font></i></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US"></span></font></i></font><font face="Calibri"><i style="mso-bidi-font-style: normal"><font size="3"><span lang="EN-US" style="mso-ansi-language: EN-US"></span><o:p></o:p></font></i></font> </p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font size="3"><font face="Calibri">Плюс, в журнале регистрации появляются соответствующие записи, при неудачных попытках</font></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font size="3"><font face="Calibri"><o:p></o:p></font></font> </p>
<p><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font size="3" face="Calibri"><strong>5.</strong></font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span><font size="3"><font face="Calibri"><b style="mso-bidi-font-weight: normal"><span style="mso-fareast-language: RU; mso-no-proof: yes">Условия отбора </span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">Договор</span></b><b style="mso-bidi-font-weight: normal"><span style="mso-fareast-language: RU; mso-no-proof: yes">ов, участвующих в расчете Резервов</span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">:</span></b></font></font></p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">по ранее указанным в обработке параметрам отбора (либо Маршрут доставки либо КА), накладывается условие на Владельцев Договоров</font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- либо это какой-то конкретный КА в случае работы в интерактиве </font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- либо это те Владельцы ТТ, у которых Маршрут доставки входит в группу Маршрутов из Основания в случае работы автомата.</font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">при этом у Владельца договора должен быть соотвествующий вид ЮрФиз лица, признак работы в выходные и дополнительной доставки</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">+ проверяется признак 'приостановки отгрузок' как у КА, так и у его Головного Контрагента, в случае если он указан. Таким образом, если флаг блокировки установлен до начала текущей даты, КА исключается из списка кандидатов на отбор Договоров.</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"></span> </p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes">далее накладывается условие на справочник Договоров с КА:</span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- </font></font></span><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">Владелец (КА) только из списка проверенных ранее <o:p></o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем<o:p></o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- ДоговорПриостановлен = ЛОЖЬ<o:p></o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- ПометкаУдаления = ЛОЖЬ<o:p></o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- СлужебныйДоговор = ЛОЖЬ<o:p></o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri">- Организация заполнена<o:p></o:p></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><font size="3"><font face="Calibri"><span style="mso-fareast-language: RU; mso-no-proof: yes">- Договор должен иметь ссылку на </span><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">GUID</span><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes"> </span><span style="mso-fareast-language: RU; mso-no-proof: yes">договора 1с7, для чего опрашивается<o:p></o:p></span></font></font></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><font size="3"><font face="Calibri"><span style="mso-spacerun: yes"> </span><i style="mso-bidi-font-style: normal"><a href="InformationRegister._ДляПереносаДанных/Help"><font color="#0066cc">РегистрСведений._ДляПереносаДанных</font><o:p></o:p></a></i></font></font></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><em></em></span> </p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"><em>т.е. условия отбора Договоров при создании СЗ полностью соответствуют условиям поиска-идентификации Договоров в <a href="DataProcessor.ОбменДаннымиССайтом_Регламент_Заявки/Help">процедуре загруки Заявок с Сайота</a> + учитывается блокировка отгрузок и проверяется соответствие маршруту отгрузки.</em></span></p>
<p class="MsoListParagraphCxSpMiddle" style="TEXT-ALIGN: justify; MARGIN: 0cm 0cm 0pt 18pt; mso-add-space: auto"><span style="mso-fareast-language: RU; mso-no-proof: yes"></span> </p>
<p><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font size="3" face="Calibri"><strong>6.</strong></font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span><font face="Calibri"><b style="mso-bidi-font-weight: normal"><span style="mso-fareast-language: RU; mso-no-proof: yes">Условия отбора </span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">Складов</span></b><b style="mso-bidi-font-weight: normal"><span style="mso-fareast-language: RU; mso-no-proof: yes">, участвующих в расчете Резервов</span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">:</span></b></font></p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p dir="ltr"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"><span style="mso-fareast-language: RU; mso-no-proof: yes">В списке складов всегда присутствует Склад из основания (параметра авторасчета) либо основной склад согласно настройке Текущего пользователя. А так же его дубль, если заполнен соответствующий в карточке склада (как правило это склад ответ хранения).</span></span></font></p>
<p dir="ltr"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"><span style="mso-fareast-language: RU; mso-no-proof: yes">В случае, если склад = Центральному складу ,т.е. это Основной склад из Константы, в список добавляются слады с признаками Бонусный, Сувенирный и Уценка. </span></span></font><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"><span style="mso-fareast-language: RU; mso-no-proof: yes">Так же,  с 31.03.2017 , в случае, если имеем дело с Основнй Складом, добавляем "склад акционных товаров" под кодом "000000105". Для бд СПб это будет "Склад масел" под кодом "000000014". </span></span></font></p>
<p dir="ltr"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"><span style="mso-fareast-language: RU; mso-no-proof: yes">Таким образом, для пользователя из Филиала, будет доступна отгрузка только со своего регионального склада, согласно основным параметрам Текущего пользователя сеанса.</span></span></font></p></blockquote><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">
<p><span style="mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin"><span style="mso-list: Ignore"><font face="Calibri"><strong>7.</strong></font><span style="FONT: 7pt &quot;Times New Roman&quot;">       </span></span></span><font size="3"><font face="Calibri"><b style="mso-bidi-font-weight: normal"><span style="mso-fareast-language: RU; mso-no-proof: yes">Расчет плановой отгрузки</span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">:</span></b></font></font></p>
<p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">          Набор параметров (общие реквизиты и предопределенные) определяет выборку, получаемую из рег.Резервы. Если выборка окажется не пустой, формируются СЗ. </span></font></font></p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"></span></font></font><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">Данные запрашиваются из РегистрНакопления.РезервыТоваров.Остаток с от</span></font></font><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">бором по складам и договорам, где Количество &gt; 0 и номенклатура, как и прочие измерения, не пустые. Помимо это, должен выполняться ряд условий:</span></font></font></p>
<p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">- Контроль за процентом наценки выполняется и влияет пока лишь на индикацию спорных случаев. В интерактивном режиме, соответствующие строки будут иметь алый фон. И, при желании, Пользователь может исключить КА из отгрузки. а может и нет. пока это отдано на откуп пользователю.  Минимальный процент описан в параметре Вход_МинимальныйПроцентНаценки. Если не задана на входе, по умолчанию принимает значение равное 3%.</span></font></font></p>
<p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">- В зависимости от значения флага флНеУдалятьМинСум, по связке Маршрут/Холдинг (Контрагент.ГоловнойКонтрагент) выполняется контроль по минимальной сумме отгрузки, которая берется либо как МинимальнаяСуммаОтгрузки либо как МинимальнаяСуммаОтгрузкиФилиал из карточки маршрута, если склад не Москва и не Основной. Т.е. если холдинг совокупно по всем КА не набрал нужной суммы, никто ничего не получит.</span></font></font></p>
<p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">- Выполняется проверка, гарантирующая, что на выбранный Маршрут/Холдин в реализации будет присутствовать не только Бонусный и Сувенирный товар. Т.е. холдинг, чтобы получить подарки, должен сначала что-то купить.</span></font></font></p>
<p><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">- Для договоров, у которых выставлен признак контроля взаиморасчетов (ДоговорКонтрагента.КонтролироватьСуммуЗадолженности = Истина) , будет выполнен соответствующий расчет. Причем с 16.01.2015  отключена проверка лимита у 'Наличников' ,т.е. проверка касается Договоров с видом оплаты "БезНал". </span></font></font><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">Расчет сводного долга аналогичен <a href="ExchangePlan.ОбменПартКом83_Сайт_данные_покупателей/Help">процедуре выгрузки взаиморасчетов на сайт</a>. Участвуют регистры <a href="AccumulationRegister.Взаиморасчеты/Help">Взаиморасчеты</a> и <a href="AccumulationRegister.ДепозитыКонтрагентов/Help">ДепозитыКонтрагентов</a>. При этом следует учесть, что с 18.04.2014 'рамки' по долгу для безналичников раздвигаются на 20% от суммы текущей-плановой отгрузки. Банкротом признается тот, у кого "СуммаДолга" и часть "Суммы плановой отгрузки" превышает "Сумму Кредита", указанную в Договоре. Величина 'коэффициента расширения' указывается в параметре Вход_ПроцентОтПланРеалДляСниженияДолгаДляКонтроляБезнальныхДоговоров. По умолчанию значение равно 20%. Если Договор КА в рассчитанные рамки не вписывается, то его Владелец считается банкротом, и отгрузка по этому КА/Холдингу становится не возможной без ручного акцепта СЗ пользователем, обладающим необходимыми правами. Исключением будут те случаи, когда у Маршрута выставлен </span></font></font><font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US">признак 'Отгружать_безКонтроляДолга' (с 27.06.2014 (сделано в первую очередь для отгрузки из МСК во Владимир)), т.е. для  филиальных складов, а так же бонусного, сувенирного и уценки </span></font></font>зависит от параметра<font size="3"><font face="Calibri"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"> Вход_ЗапретитьОтгрузкуДолжникамСоСкладаФилиалаСувБонУц и по умолчанию = ЛОЖЬ.<br></span></font></font></p></blockquote></span></font></font>
<p><font size="3"><font face="Calibri"><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"></span></b></font></font> </p>
<p><font size="3"><font face="Calibri"><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-fareast-language: RU; mso-no-proof: yes; mso-ansi-language: EN-US"></span></b></font></font> </p></span></font></font></span></font></font></font></font></font></span></body></html>